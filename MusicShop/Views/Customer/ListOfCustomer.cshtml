@model IEnumerable<MusicShop.Models.Customer>
@{
    ViewBag.Title = "ListOfCustomer";
}



@section logged{
    @if (Session == null || Session["userType"] == null || Session["userType"].ToString() != "staff")
    {
        Response.Redirect(Url.Action("Login", "Admin"));
    }

}

@if (Model == null)
{
    <h3>There are no customers in the database.</h3>
}

else

if (Session != null || Session["userType"] != null && Session["userType"].ToString() == "staff")
{


    <h2>Customer Administration</h2>


    <h3>Customer Details</h3>

    <div id="otherStaff">
        <table>
            <thead>
                <tr>
                    <th>Customer Details</th>
                    <th>Date Registered</th>
                    <th>Reset Password</th>
                    <th>Delete Staff</th>
                </tr>
            </thead>
            <tbody>




                @foreach (var cust in Model)
                {
                    <tr>
                        <td>@cust.Email, @cust.Name, @cust.Phone, @cust.AddressLine1, @cust.AddressLine2, @cust.City, @cust.Country</td>
                        <td>@cust.DateRegistered.ToString()</td>

                        <td>
                            @using (Html.BeginForm("ResetPass", "Customer", cust))
                            {
                                <input type="submit" value="Reset Password" onclick="return confirm('Customer password will be set to pass. Are you sure?')" />
                            }
                        </td>
                        <td>
                            @using (Html.BeginForm("DeleteCustomer", "Customer", cust))
                            {
                                <input type="submit" value="Delete Customer" onclick="return confirm('Are you sure you want to delete this Customer?')" />
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

} 