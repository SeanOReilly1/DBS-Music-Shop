@model IEnumerable<MusicShop.Models.Admin>
@{
    ViewBag.Title = "ListOfAdmin";
}

@section logged{
    @if (Session == null || Session["userType"] == null || Session["userType"].ToString() != "staff")
    {
        Response.Redirect(Url.Action("Login", "Admin"));
    }

}

@if (Session != null || Session["userType"] != null && Session["userType"].ToString() == "staff")
{
    <h2>Staff Administration</h2>

    <h3>@Html.ActionLink("Add Admin User", "AddAdmin")</h3>
    <hr /><br />

    
    foreach (var staff in Model)
    {
        if (staff.Email == Session["Email"].ToString())
        {
            <h3>Your details</h3>

            <div id="currentStaffMember">
                <p>
                    Email: @staff.Email
                    @Html.ActionLink("Edit Password", "EditPassword")
                </p>
            </div>

        }
    }

    <br /><hr /><br />


    
    <h3>Other Staff Member Details</h3>

    <div id="otherStaffMembers" class="center">
        <table>
            <thead>
                <tr>
                    <th>Email Address</th>
                    <th>Reset Password</th>
                    <th>Delete Staff</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var admin in Model)
                {

                    if (admin.Email != Session["Email"].ToString())
                    {

                        <tr>
                            <td>@admin.Email</td>
                            
                       
                            <td>
                                @using (Html.BeginForm("ResetPass", "Admin", admin))
                                {
                                    <input type="submit" value="Reset Password" onclick="return confirm('Admin password will be set ad admin. Are you sure?')" />
                                }
                            </td>
                            <td>
                                @using (Html.BeginForm("DeleteAdmin", "Admin", admin))
                                {
                                    <input type="submit" value="Delete Staff Member" onclick="return confirm('Are you sure you want to delete this Staff Member?')" />
                                }
                            </td>
                        </tr>

                    }
                }
            </tbody>
        </table>
    </div>

}


